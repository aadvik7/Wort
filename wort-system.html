<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wort — Logistics Management System</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:wght@300;400;500&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg: #0b0d11; --surface: #13161c; --surface2: #191d26; --surface3: #1f2535;
  --border: rgba(255,255,255,0.06); --border-focus: rgba(201,168,76,0.5);
  --gold: #c9a84c; --gold-light: #e2c06a; --gold-dim: rgba(201,168,76,0.1);
  --white: #eef0f6; --muted: #5a6278; --soft: #8b93a8;
  --green: #3ecf8e; --green-dim: rgba(62,207,142,0.1);
  --red: #f16060; --red-dim: rgba(241,96,96,0.1);
  --blue: #5b9cf6; --blue-dim: rgba(91,156,246,0.1);
  --amber: #e9b94e; --amber-dim: rgba(233,185,78,0.1);
  --violet: #9b7cf8; --violet-dim: rgba(155,124,248,0.1);
}
html { scroll-behavior: smooth; }
body { font-family: 'DM Sans', sans-serif; background: var(--bg); color: var(--white); min-height: 100vh; overflow-x: hidden; }

#login-screen { min-height:100vh; display:flex; align-items:center; justify-content:center; background:var(--bg); position:relative; }
#login-screen::before { content:''; position:absolute; inset:0; background:radial-gradient(ellipse 60% 50% at 50% 40%, rgba(201,168,76,0.06) 0%, transparent 100%); pointer-events:none; }

.login-card { background:var(--surface); border:1px solid var(--border); border-radius:18px; padding:2.5rem; width:400px; position:relative; z-index:1; }
.login-brand { font-family:'Syne',sans-serif; font-size:1.75rem; font-weight:800; color:var(--white); margin-bottom:0.2rem; }
.login-brand span { color:var(--gold); }
.login-tagline { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--muted); letter-spacing:0.5px; margin-bottom:2rem; }
.field-label { display:block; font-size:0.72rem; font-weight:600; letter-spacing:1px; text-transform:uppercase; color:var(--soft); margin-bottom:0.6rem; }
.role-grid { display:grid; grid-template-columns:1fr 1fr; gap:0.6rem; margin-bottom:1.25rem; }
.role-tile { border:1.5px solid var(--border); border-radius:10px; padding:1rem; cursor:pointer; transition:all 0.18s; text-align:center; }
.role-tile:hover { border-color:rgba(201,168,76,0.4); background:var(--gold-dim); }
.role-tile.active { border-color:var(--gold); background:var(--gold-dim); }
.role-tile-icon { width:32px; height:32px; background:var(--surface3); border-radius:8px; margin:0 auto 0.5rem; display:flex; align-items:center; justify-content:center; }
.role-tile-icon svg { width:16px; height:16px; stroke:var(--soft); }
.role-tile.active .role-tile-icon svg { stroke:var(--gold); }
.role-tile-name { font-size:0.85rem; font-weight:600; color:var(--white); }
.role-tile-desc { font-size:0.7rem; color:var(--muted); margin-top:0.15rem; }
.field-input { width:100%; background:var(--surface2); border:1.5px solid var(--border); border-radius:8px; padding:0.7rem 1rem; color:var(--white); font-family:'DM Sans',sans-serif; font-size:0.88rem; outline:none; transition:border-color 0.18s; margin-bottom:1rem; }
.field-input:focus { border-color:var(--border-focus); }
.field-input::placeholder { color:var(--muted); }
select.field-input option { background:var(--surface2); }
textarea.field-input { resize:vertical; min-height:80px; margin-bottom:0; }
.btn { font-family:'DM Sans',sans-serif; font-weight:600; border:none; border-radius:8px; cursor:pointer; transition:all 0.18s; display:inline-flex; align-items:center; justify-content:center; gap:0.4rem; }
.btn-primary { background:var(--gold); color:#0b0d11; padding:0.75rem 1.5rem; font-size:0.9rem; width:100%; }
.btn-primary:hover { background:var(--gold-light); }
.btn-secondary { background:transparent; color:var(--gold); border:1.5px solid var(--gold); padding:0.55rem 1.1rem; font-size:0.82rem; }
.btn-secondary:hover { background:var(--gold-dim); }
.btn-ghost { background:transparent; color:var(--soft); border:1px solid var(--border); padding:0.55rem 1.1rem; font-size:0.82rem; }
.btn-ghost:hover { border-color:var(--soft); color:var(--white); }
.btn-icon { width:30px; height:30px; padding:0; border-radius:6px; font-size:0.75rem; background:transparent; border:1px solid var(--border); color:var(--soft); }
.btn-icon:hover { border-color:var(--gold); color:var(--gold); background:var(--gold-dim); }
.btn-icon.del:hover { border-color:var(--red); color:var(--red); background:var(--red-dim); }

#app { display:none; min-height:100vh; }
.sidebar { position:fixed; left:0; top:0; bottom:0; width:230px; background:var(--surface); border-right:1px solid var(--border); display:flex; flex-direction:column; z-index:50; }
.sidebar-brand { padding:1.4rem 1.4rem 1rem; border-bottom:1px solid var(--border); }
.brand-text { font-family:'Syne',sans-serif; font-size:1.4rem; font-weight:800; color:var(--white); }
.brand-text span { color:var(--gold); }
.brand-badge { display:inline-block; margin-top:0.3rem; font-family:'DM Mono',monospace; font-size:0.65rem; letter-spacing:1.5px; text-transform:uppercase; color:var(--gold); background:var(--gold-dim); border:1px solid rgba(201,168,76,0.2); padding:0.18rem 0.5rem; border-radius:4px; }
.nav { flex:1; padding:0.75rem 0; overflow-y:auto; }
.nav-group-label { padding:0.6rem 1.2rem 0.2rem; font-size:0.62rem; font-weight:600; letter-spacing:1.5px; text-transform:uppercase; color:var(--muted); }
.nav-link { display:flex; align-items:center; gap:0.6rem; padding:0.6rem 1.2rem; font-size:0.85rem; font-weight:500; color:var(--soft); cursor:pointer; transition:all 0.15s; border-left:2px solid transparent; }
.nav-link:hover { background:var(--surface2); color:var(--white); }
.nav-link.active { color:var(--gold); background:var(--gold-dim); border-left-color:var(--gold); }
.nav-link-icon { width:18px; height:18px; flex-shrink:0; }
.nav-link-icon svg { width:100%; height:100%; stroke:currentColor; }
.sidebar-user { padding:1rem 1.2rem; border-top:1px solid var(--border); }
.user-row { display:flex; align-items:center; gap:0.6rem; margin-bottom:0.6rem; }
.avatar { width:34px; height:34px; background:var(--gold-dim); border:1px solid rgba(201,168,76,0.25); border-radius:8px; display:flex; align-items:center; justify-content:center; font-family:'Syne',sans-serif; font-size:0.85rem; font-weight:700; color:var(--gold); flex-shrink:0; }
.user-name-text { font-size:0.82rem; font-weight:600; }
.user-role-text { font-size:0.68rem; color:var(--muted); }
.logout-link { width:100%; padding:0.45rem 0.75rem; background:transparent; border:1px solid var(--border); border-radius:6px; color:var(--muted); font-size:0.78rem; font-family:'DM Sans',sans-serif; cursor:pointer; transition:all 0.15s; text-align:left; }
.logout-link:hover { border-color:var(--red); color:var(--red); }

.main { margin-left:230px; min-height:100vh; }
.topbar { padding:1.1rem 2rem; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; background:var(--bg); position:sticky; top:0; z-index:40; }
.topbar-title { font-family:'Syne',sans-serif; font-size:1.15rem; font-weight:700; }
.topbar-sub { font-size:0.75rem; color:var(--muted); margin-top:0.1rem; }
.topbar-actions { display:flex; gap:0.5rem; }
.content { padding:1.75rem 2rem; }

.stat-row { display:grid; grid-template-columns:repeat(4,1fr); gap:1rem; margin-bottom:1.5rem; }
.stat-box { background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:1.1rem 1.25rem; transition:border-color 0.15s; }
.stat-box:hover { border-color:rgba(201,168,76,0.25); }
.stat-box-top { display:flex; align-items:center; justify-content:space-between; margin-bottom:0.75rem; }
.stat-icon-wrap { width:32px; height:32px; border-radius:8px; display:flex; align-items:center; justify-content:center; }
.stat-icon-wrap svg { width:16px; height:16px; stroke:currentColor; }
.stat-pill { font-family:'DM Mono',monospace; font-size:0.68rem; padding:0.18rem 0.5rem; border-radius:4px; }
.pill-up { background:var(--green-dim); color:var(--green); }
.pill-neutral { background:var(--surface3); color:var(--soft); }
.stat-value { font-family:'Syne',sans-serif; font-size:1.8rem; font-weight:800; line-height:1; margin-bottom:0.2rem; }
.stat-name { font-size:0.75rem; color:var(--muted); }

.table-wrap { background:var(--surface); border:1px solid var(--border); border-radius:10px; overflow:hidden; margin-bottom:1.5rem; }
.table-head { padding:1rem 1.25rem; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; gap:0.75rem; flex-wrap:wrap; }
.table-title { font-family:'Syne',sans-serif; font-size:0.95rem; font-weight:700; }
.table-controls { display:flex; gap:0.5rem; align-items:center; }
.search-box { background:var(--surface2); border:1px solid var(--border); border-radius:6px; padding:0.45rem 0.75rem; color:var(--white); font-size:0.8rem; font-family:'DM Sans',sans-serif; outline:none; width:200px; transition:border-color 0.15s; }
.search-box:focus { border-color:var(--border-focus); }
.search-box::placeholder { color:var(--muted); }
.filter-select { background:var(--surface2); border:1px solid var(--border); border-radius:6px; padding:0.45rem 0.75rem; color:var(--white); font-size:0.8rem; font-family:'DM Sans',sans-serif; outline:none; cursor:pointer; }
.filter-select option { background:var(--surface2); }
.table-scroll { overflow-x:auto; }
table { width:100%; border-collapse:collapse; }
thead tr { border-bottom:1px solid var(--border); }
th { padding:0.65rem 1rem; text-align:left; font-size:0.68rem; font-weight:600; letter-spacing:1px; text-transform:uppercase; color:var(--muted); white-space:nowrap; }
td { padding:0.85rem 1rem; font-size:0.83rem; border-bottom:1px solid rgba(255,255,255,0.03); vertical-align:middle; }
tbody tr { transition:background 0.12s; }
tbody tr:hover { background:var(--surface2); }
tbody tr:last-child td { border-bottom:none; }

.badge { display:inline-flex; align-items:center; padding:0.22rem 0.6rem; border-radius:4px; font-size:0.7rem; font-weight:600; letter-spacing:0.3px; white-space:nowrap; }
.b-submitted { background:var(--blue-dim); color:var(--blue); }
.b-quoted { background:var(--amber-dim); color:var(--amber); }
.b-completed { background:var(--green-dim); color:var(--green); }
.b-lost { background:var(--red-dim); color:var(--red); }
.b-air { background:var(--violet-dim); color:var(--violet); }
.b-sea { background:var(--blue-dim); color:var(--blue); }
.b-road { background:var(--amber-dim); color:var(--amber); }
.b-multi { background:var(--green-dim); color:var(--green); }

.overlay { position:fixed; inset:0; background:rgba(0,0,0,0.65); backdrop-filter:blur(6px); z-index:200; display:none; align-items:center; justify-content:center; padding:1.5rem; }
.overlay.open { display:flex; }
.modal { background:var(--surface); border:1px solid var(--border); border-radius:14px; width:100%; max-width:560px; max-height:88vh; overflow-y:auto; }
.modal-lg { max-width:680px; }
.modal-header { padding:1.25rem 1.5rem; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; position:sticky; top:0; background:var(--surface); z-index:1; }
.modal-header-title { font-family:'Syne',sans-serif; font-size:1rem; font-weight:700; }
.modal-close-btn { width:28px; height:28px; border-radius:6px; border:1px solid var(--border); background:transparent; color:var(--muted); font-size:0.85rem; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.15s; }
.modal-close-btn:hover { border-color:var(--red); color:var(--red); }
.modal-body { padding:1.5rem; }
.modal-footer { padding:1rem 1.5rem; border-top:1px solid var(--border); display:flex; justify-content:flex-end; gap:0.5rem; }
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:1rem; }
.form-row .span-2 { grid-column:1/-1; }
.form-group { margin-bottom:0; }

.chart-grid { display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin-bottom:1.5rem; }
.chart-box { background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:1.25rem; }
.chart-box-title { font-family:'Syne',sans-serif; font-size:0.78rem; font-weight:700; color:var(--soft); text-transform:uppercase; letter-spacing:0.8px; margin-bottom:1.1rem; }
.bar-list { display:flex; flex-direction:column; gap:0.65rem; }
.bar-item { display:flex; align-items:center; gap:0.65rem; }
.bar-item-label { font-size:0.75rem; color:var(--soft); width:100px; flex-shrink:0; }
.bar-track { flex:1; height:6px; background:var(--surface3); border-radius:100px; overflow:hidden; }
.bar-fill { height:100%; border-radius:100px; transition:width 0.7s cubic-bezier(.4,0,.2,1); }
.bar-count { font-size:0.72rem; font-family:'DM Mono',monospace; color:var(--gold); width:24px; text-align:right; }
.donut-container { display:flex; align-items:center; gap:1.25rem; }
.donut-svg-el { width:110px; height:110px; flex-shrink:0; }
.legend-list { display:flex; flex-direction:column; gap:0.45rem; }
.legend-row { display:flex; align-items:center; gap:0.45rem; }
.legend-swatch { width:7px; height:7px; border-radius:2px; flex-shrink:0; }
.legend-key { font-size:0.75rem; color:var(--soft); flex:1; }
.legend-count { font-size:0.72rem; font-family:'DM Mono',monospace; color:var(--white); font-weight:600; }

.perf-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:1rem; margin-bottom:1.5rem; }
.perf-box { background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:1.25rem; transition:border-color 0.15s; }
.perf-box:hover { border-color:rgba(201,168,76,0.25); }
.perf-person { display:flex; align-items:center; gap:0.65rem; margin-bottom:1rem; }
.perf-name { font-size:0.88rem; font-weight:600; }
.perf-title { font-size:0.68rem; color:var(--muted); }
.perf-nums { display:grid; grid-template-columns:1fr 1fr 1fr; gap:0.5rem; margin-bottom:1rem; }
.perf-num-box { text-align:center; }
.perf-big { font-family:'DM Mono',monospace; font-size:1.1rem; font-weight:600; color:var(--gold); }
.perf-small { font-size:0.62rem; color:var(--muted); text-transform:uppercase; letter-spacing:0.5px; margin-top:0.1rem; }
.progress-row { margin-bottom:0.4rem; }
.progress-label-row { display:flex; justify-content:space-between; margin-bottom:0.25rem; }
.progress-label { font-size:0.7rem; color:var(--muted); }
.progress-val { font-size:0.7rem; font-family:'DM Mono',monospace; color:var(--gold); }
.progress-track { height:4px; background:var(--surface3); border-radius:100px; overflow:hidden; }
.progress-fill { height:100%; border-radius:100px; background:var(--gold); transition:width 0.7s cubic-bezier(.4,0,.2,1); }

.detail-grid { display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin-bottom:1.25rem; }
.detail-box { background:var(--surface2); border:1px solid var(--border); border-radius:8px; padding:1.1rem; }
.detail-field { margin-bottom:0.85rem; }
.detail-field:last-child { margin-bottom:0; }
.detail-key { font-size:0.68rem; text-transform:uppercase; letter-spacing:0.8px; color:var(--muted); margin-bottom:0.2rem; }
.detail-val { font-size:0.88rem; color:var(--white); font-weight:500; }
.quote-list { display:flex; flex-direction:column; gap:0.6rem; }
.quote-box { background:var(--surface2); border:1px solid var(--border); border-radius:8px; padding:0.9rem 1rem; }
.quote-top { display:flex; justify-content:space-between; align-items:center; margin-bottom:0.3rem; }
.quote-amount { font-family:'DM Mono',monospace; font-size:1rem; font-weight:600; color:var(--gold); }
.quote-meta { font-size:0.72rem; color:var(--muted); }

.empty-state { padding:3rem 2rem; text-align:center; color:var(--muted); }
.empty-state-icon { width:40px; height:40px; background:var(--surface2); border-radius:10px; margin:0 auto 0.75rem; display:flex; align-items:center; justify-content:center; }
.empty-state-icon svg { width:20px; height:20px; stroke:var(--muted); }
.empty-state-text { font-size:0.85rem; }

.page { display:none; }
.page.active { display:block; }

.toast { position:fixed; bottom:1.75rem; right:1.75rem; background:var(--surface); border:1px solid var(--border); border-radius:8px; padding:0.85rem 1.1rem; display:flex; align-items:center; gap:0.6rem; z-index:999; transform:translateY(80px); opacity:0; transition:all 0.25s; max-width:300px; }
.toast.visible { transform:translateY(0); opacity:1; }
.toast.t-success { border-color:rgba(62,207,142,0.3); }
.toast.t-error { border-color:rgba(241,96,96,0.3); }
.toast-dot { width:8px; height:8px; border-radius:50%; flex-shrink:0; }
.t-success .toast-dot { background:var(--green); }
.t-error .toast-dot { background:var(--red); }
.toast-text { font-size:0.82rem; color:var(--white); }

@media (max-width:1024px) {
  .stat-row { grid-template-columns:repeat(2,1fr); }
  .chart-grid { grid-template-columns:1fr; }
  .perf-grid { grid-template-columns:1fr 1fr; }
}
</style>
</head>
<body>

<div id="login-screen">
  <div class="login-card">
    <div class="login-brand">W<span>o</span>rt</div>
    <div class="login-tagline">// Internal Logistics System</div>
    <label class="field-label">Select role</label>
    <div class="role-grid">
      <div class="role-tile" id="tile-admin" onclick="pickRole('admin')">
        <div class="role-tile-icon"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.8" stroke-linecap="round"><path d="M12 2l3 7h7l-5.5 4 2 7L12 17l-6.5 3 2-7L2 9h7z"/></svg></div>
        <div class="role-tile-name">Admin</div>
        <div class="role-tile-desc">Full access &amp; analytics</div>
      </div>
      <div class="role-tile" id="tile-employee" onclick="pickRole('employee')">
        <div class="role-tile-icon"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.8" stroke-linecap="round"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/></svg></div>
        <div class="role-tile-name">Employee</div>
        <div class="role-tile-desc">Leads &amp; quotes</div>
      </div>
    </div>
    <label class="field-label">Your name</label>
    <input class="field-input" type="text" id="login-name" placeholder="e.g. Rahul Sharma">
    <button class="btn btn-primary" onclick="doLogin()">Enter System</button>
  </div>
</div>

<div id="app">
  <aside class="sidebar">
    <div class="sidebar-brand">
      <div class="brand-text">W<span>o</span>rt</div>
      <div class="brand-badge" id="brand-badge">Admin</div>
    </div>
    <nav class="nav" id="main-nav"></nav>
    <div class="sidebar-user">
      <div class="user-row">
        <div class="avatar" id="user-av">R</div>
        <div><div class="user-name-text" id="user-name">User</div><div class="user-role-text" id="user-role">Administrator</div></div>
      </div>
      <button class="logout-link" onclick="doLogout()">Sign out</button>
    </div>
  </aside>

  <main class="main">
    <div class="topbar">
      <div><div class="topbar-title" id="page-title">Dashboard</div><div class="topbar-sub" id="page-sub">Company-wide overview</div></div>
      <div class="topbar-actions" id="page-actions"></div>
    </div>
    <div class="content">
      <div class="page" id="page-dashboard">
        <div class="stat-row" id="dash-stats"></div>
        <div class="chart-grid">
          <div class="chart-box"><div class="chart-box-title">Leads by Source</div><div class="bar-list" id="source-bars"></div></div>
          <div class="chart-box"><div class="chart-box-title">Status Distribution</div><div class="donut-container"><svg class="donut-svg-el" viewBox="0 0 110 110" id="donut-el"></svg><div class="legend-list" id="donut-legend"></div></div></div>
        </div>
        <div style="font-family:'Syne',sans-serif;font-size:0.95rem;font-weight:700;margin-bottom:0.75rem">Team Performance</div>
        <div class="perf-grid" id="dash-perf"></div>
      </div>
      <div class="page" id="page-leads">
        <div class="table-wrap">
          <div class="table-head">
            <div class="table-title">All Leads</div>
            <div class="table-controls">
              <input class="search-box" placeholder="Search client, route..." oninput="filterTable(this.value)">
              <select class="filter-select" onchange="statusFilter(this.value)">
                <option value="">All Status</option><option>Submitted</option><option>Quoted</option><option>Completed</option><option>Lost</option>
              </select>
              <button class="btn btn-primary" style="padding:0.5rem 1rem;font-size:0.8rem" onclick="openAddLead()">Add Lead</button>
            </div>
          </div>
          <div class="table-scroll"><table><thead><tr><th>ID</th><th>Client</th><th>Route</th><th>Mode</th><th>Source</th><th>Status</th><th>Value</th><th>Added By</th><th>Date</th><th>Actions</th></tr></thead><tbody id="leads-body"></tbody></table></div>
        </div>
      </div>
      <div class="page" id="page-myleads">
        <div class="table-wrap">
          <div class="table-head">
            <div class="table-title">My Leads</div>
            <div class="table-controls"><button class="btn btn-primary" style="padding:0.5rem 1rem;font-size:0.8rem" onclick="openAddLead()">Add Lead</button></div>
          </div>
          <div class="table-scroll"><table><thead><tr><th>ID</th><th>Client</th><th>Route</th><th>Mode</th><th>Source</th><th>Status</th><th>Value</th><th>Date</th><th>Actions</th></tr></thead><tbody id="myleads-body"></tbody></table></div>
        </div>
      </div>
      <div class="page" id="page-myanalytics">
        <div class="stat-row" id="my-stats"></div>
        <div class="chart-grid">
          <div class="chart-box"><div class="chart-box-title">My Leads by Status</div><div class="bar-list" id="my-status-bars"></div></div>
          <div class="chart-box"><div class="chart-box-title">My Leads by Mode</div><div class="bar-list" id="my-mode-bars"></div></div>
        </div>
      </div>
      <div class="page" id="page-reports"><div class="perf-grid" id="report-perf"></div></div>
    </div>
  </main>
</div>

<!-- Lead Modal -->
<div class="overlay" id="modal-lead">
  <div class="modal">
    <div class="modal-header"><div class="modal-header-title" id="modal-lead-title">Add New Lead</div><button class="modal-close-btn" onclick="closeM('modal-lead')">&#215;</button></div>
    <div class="modal-body">
      <div class="form-row">
        <div class="form-group"><label class="field-label">Client Name *</label><input class="field-input" type="text" id="f-client" placeholder="Company or contact name"></div>
        <div class="form-group"><label class="field-label">Contact</label><input class="field-input" type="text" id="f-contact" placeholder="+91 00000 00000"></div>
        <div class="form-group"><label class="field-label">Origin *</label><input class="field-input" type="text" id="f-origin" placeholder="e.g. Mumbai"></div>
        <div class="form-group"><label class="field-label">Destination *</label><input class="field-input" type="text" id="f-dest" placeholder="e.g. Dubai, UAE"></div>
        <div class="form-group"><label class="field-label">Cargo Type</label><input class="field-input" type="text" id="f-cargo" placeholder="e.g. Machinery, Textiles"></div>
        <div class="form-group"><label class="field-label">Container</label><select class="field-input" id="f-container"><option value="">Select</option><option>20ft FCL</option><option>40ft FCL</option><option>LCL</option><option>Bulk</option><option>Break Bulk</option><option>N/A</option></select></div>
        <div class="form-group"><label class="field-label">Mode *</label><select class="field-input" id="f-mode"><option value="">Select</option><option>Air</option><option>Sea</option><option>Road</option><option>Multimodal</option></select></div>
        <div class="form-group"><label class="field-label">Lead Source *</label><select class="field-input" id="f-source"><option value="">Select</option><option>Sales Visit</option><option>Mouth-to-Mouth</option><option>Repeat Client</option><option>Newspaper</option><option>Online Enquiry</option><option>Trade Fair</option><option>Cold Call</option><option>Referral</option></select></div>
        <div class="form-group"><label class="field-label">Status</label><select class="field-input" id="f-status"><option>Submitted</option><option>Quoted</option><option>Completed</option><option>Lost</option></select></div>
        <div class="form-group"><label class="field-label">Estimated Value (INR)</label><input class="field-input" type="number" id="f-value" placeholder="e.g. 250000"></div>
        <div class="form-group span-2"><label class="field-label">Notes</label><textarea class="field-input" id="f-notes" placeholder="Additional details..."></textarea></div>
      </div>
    </div>
    <div class="modal-footer"><button class="btn btn-ghost" onclick="closeM('modal-lead')">Cancel</button><button class="btn btn-primary" style="width:auto;padding:0.6rem 1.5rem" onclick="saveLead()">Save Lead</button></div>
  </div>
</div>

<!-- Detail Modal -->
<div class="overlay" id="modal-detail">
  <div class="modal modal-lg">
    <div class="modal-header"><div class="modal-header-title" id="modal-detail-title">Lead Details</div><button class="modal-close-btn" onclick="closeM('modal-detail')">&#215;</button></div>
    <div class="modal-body" id="modal-detail-body"></div>
  </div>
</div>

<!-- Quote Modal -->
<div class="overlay" id="modal-quote">
  <div class="modal" style="max-width:420px">
    <div class="modal-header"><div class="modal-header-title">Submit Quote</div><button class="modal-close-btn" onclick="closeM('modal-quote')">&#215;</button></div>
    <div class="modal-body">
      <div style="margin-bottom:1rem"><label class="field-label">Amount *</label><input class="field-input" type="number" id="q-amount" placeholder="e.g. 185000"></div>
      <div style="margin-bottom:1rem"><label class="field-label">Currency</label><select class="field-input" id="q-currency"><option>INR</option><option>USD</option><option>EUR</option><option>AED</option></select></div>
      <div style="margin-bottom:1rem"><label class="field-label">Delivery Estimate</label><input class="field-input" type="text" id="q-delivery" placeholder="e.g. 12-15 days"></div>
      <div><label class="field-label">Notes</label><textarea class="field-input" id="q-notes" placeholder="Quote terms or breakdown..."></textarea></div>
    </div>
    <div class="modal-footer"><button class="btn btn-ghost" onclick="closeM('modal-quote')">Cancel</button><button class="btn btn-primary" style="width:auto;padding:0.6rem 1.5rem" onclick="saveQuote()">Submit Quote</button></div>
  </div>
</div>

<div class="toast" id="toast"><div class="toast-dot"></div><div class="toast-text" id="toast-text">Done.</div></div>

<script>
let currentUser=null,currentRole=null,selectedRole=null,editingId=null,quotingId=null,currentFilter='',currentStatus='';
let leads=[
  {id:'WRT-001',client:'Sharma Textiles',contact:'+91 9812345678',origin:'Surat',dest:'Frankfurt, Germany',cargo:'Textiles',container:'40ft FCL',mode:'Sea',source:'Repeat Client',status:'Completed',value:420000,notes:'Regular client, priority handling',addedBy:'Raj Kumar',date:'2025-01-15',quotes:[{amount:385000,currency:'INR',delivery:'18-22 days',notes:'Direct vessel',by:'Raj Kumar',date:'2025-01-16'}]},
  {id:'WRT-002',client:'Metro Infra Ltd',contact:'+91 9823456789',origin:'Mumbai',dest:'Dubai, UAE',cargo:'Heavy Machinery',container:'Break Bulk',mode:'Sea',source:'Sales Visit',status:'Quoted',value:1200000,notes:'Special handling required',addedBy:'Priya Singh',date:'2025-01-18',quotes:[{amount:1100000,currency:'INR',delivery:'10-12 days',notes:'Break bulk vessel',by:'Priya Singh',date:'2025-01-19'}]},
  {id:'WRT-003',client:'Rajput Spices',contact:'+91 9834567890',origin:'Rajkot',dest:'London, UK',cargo:'Spices',container:'LCL',mode:'Sea',source:'Mouth-to-Mouth',status:'Submitted',value:85000,notes:'First-time exporter',addedBy:'Raj Kumar',date:'2025-01-22',quotes:[]},
  {id:'WRT-004',client:'Pune Auto Parts',contact:'+91 9845678901',origin:'Pune',dest:'Lagos, Nigeria',cargo:'Auto Components',container:'20ft FCL',mode:'Sea',source:'Online Enquiry',status:'Lost',value:310000,notes:'Lost to competitor',addedBy:'Amit Verma',date:'2025-01-25',quotes:[{amount:295000,currency:'INR',delivery:'22-25 days',notes:'Via Colombo',by:'Amit Verma',date:'2025-01-26'}]},
  {id:'WRT-005',client:'Delhi Handicrafts',contact:'+91 9856789012',origin:'Delhi',dest:'New York, USA',cargo:'Handicrafts',container:'LCL',mode:'Air',source:'Trade Fair',status:'Quoted',value:145000,notes:'Urgent delivery',addedBy:'Priya Singh',date:'2025-01-28',quotes:[{amount:142000,currency:'INR',delivery:'3-5 days',notes:'Priority air freight',by:'Priya Singh',date:'2025-01-28'}]},
  {id:'WRT-006',client:'Chennai Pharma',contact:'+91 9867890123',origin:'Chennai',dest:'Nairobi, Kenya',cargo:'Pharmaceuticals',container:'20ft FCL',mode:'Sea',source:'Referral',status:'Submitted',value:560000,notes:'Temperature controlled',addedBy:'Amit Verma',date:'2025-02-01',quotes:[]},
];
const team=['Raj Kumar','Priya Singh','Amit Verma'];
const statusClass={Submitted:'b-submitted',Quoted:'b-quoted',Completed:'b-completed',Lost:'b-lost'};
const modeClass={Air:'b-air',Sea:'b-sea',Road:'b-road',Multimodal:'b-multi'};
const statusColors={Submitted:'#5b9cf6',Quoted:'#e9b94e',Completed:'#3ecf8e',Lost:'#f16060'};
const srcColors=['#c9a84c','#5b9cf6','#3ecf8e','#f16060','#9b7cf8','#e9b94e','#f472b6','#34d399'];
function badge(t,c){return`<span class="badge ${c}">${t}</span>`;}
function fmtVal(n){return n?'&#8377;'+Number(n).toLocaleString('en-IN'):'&#8212;';}
function toast(msg,type='success'){const e=document.getElementById('toast');document.getElementById('toast-text').textContent=msg;e.className=`toast t-${type} visible`;setTimeout(()=>e.classList.remove('visible'),3000);}

function pickRole(r){selectedRole=r;document.querySelectorAll('.role-tile').forEach(t=>t.classList.remove('active'));document.getElementById('tile-'+r).classList.add('active');}
function doLogin(){const n=document.getElementById('login-name').value.trim();if(!selectedRole)return toast('Please select a role.','error');if(!n)return toast('Please enter your name.','error');currentRole=selectedRole;currentUser=n;document.getElementById('login-screen').style.display='none';document.getElementById('app').style.display='block';document.getElementById('brand-badge').textContent=currentRole==='admin'?'Admin':'Employee';document.getElementById('user-av').textContent=n[0].toUpperCase();document.getElementById('user-name').textContent=n;document.getElementById('user-role').textContent=currentRole==='admin'?'Administrator':'Employee';buildNav();goTo(currentRole==='admin'?'dashboard':'myleads');}
function doLogout(){currentUser=null;currentRole=null;selectedRole=null;document.getElementById('login-screen').style.display='flex';document.getElementById('app').style.display='none';document.getElementById('login-name').value='';document.querySelectorAll('.role-tile').forEach(t=>t.classList.remove('active'));}

const navDefs={
  admin:[{id:'dashboard',label:'Dashboard',svg:'<rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/>'},
    {id:'leads',label:'All Leads',svg:'<path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"/><rect x="9" y="3" width="6" height="4" rx="1"/><line x1="9" y1="12" x2="15" y2="12"/>'},
    {id:'reports',label:'Team Reports',svg:'<path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/>'}],
  employee:[{id:'myleads',label:'My Leads',svg:'<path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"/><rect x="9" y="3" width="6" height="4" rx="1"/>'},
    {id:'myanalytics',label:'My Analytics',svg:'<line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/>'}]
};
const pageMeta={dashboard:['Dashboard','Company-wide activity overview'],leads:['Lead Management','All shipment leads across the company'],reports:['Team Reports','Employee performance and analytics'],myleads:['My Leads','Leads submitted by you'],myanalytics:['My Analytics','Your personal performance dashboard']};

function buildNav(){const nav=document.getElementById('main-nav');const items=navDefs[currentRole];nav.innerHTML='<div class="nav-group-label">Navigation</div>'+items.map(i=>`<div class="nav-link" id="nav-${i.id}" onclick="goTo('${i.id}')"><div class="nav-link-icon"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">${i.svg}</svg></div>${i.label}</div>`).join('');}

function goTo(id){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.querySelectorAll('.nav-link').forEach(n=>n.classList.remove('active'));document.getElementById('page-'+id)?.classList.add('active');document.getElementById('nav-'+id)?.classList.add('active');const[title,sub]=pageMeta[id]||['',''];document.getElementById('page-title').textContent=title;document.getElementById('page-sub').textContent=sub;document.getElementById('page-actions').innerHTML='';if(id==='dashboard')renderDash();if(id==='leads')renderLeads();if(id==='myleads')renderMyLeads();if(id==='myanalytics')renderMyAnalytics();if(id==='reports')renderReports();}

function renderDash(){const total=leads.length,done=leads.filter(l=>l.status==='Completed').length,active=leads.filter(l=>l.status==='Quoted').length,pipeline=leads.reduce((s,l)=>s+(l.value||0),0),rate=total?Math.round(done/total*100):0;
document.getElementById('dash-stats').innerHTML=[{val:total,label:'Total Leads'},{val:done,label:'Completed'},{val:rate+'%',label:'Conversion Rate'},{val:'&#8377;'+(pipeline/100000).toFixed(1)+'L',label:'Pipeline Value'}].map(s=>`<div class="stat-box"><div class="stat-value">${s.val}</div><div class="stat-name">${s.label}</div></div>`).join('');
const src={};leads.forEach(l=>src[l.source]=(src[l.source]||0)+1);const maxS=Math.max(...Object.values(src));document.getElementById('source-bars').innerHTML=Object.entries(src).sort((a,b)=>b[1]-a[1]).map(([k,v],i)=>`<div class="bar-item"><div class="bar-item-label">${k}</div><div class="bar-track"><div class="bar-fill" style="width:${v/maxS*100}%;background:${srcColors[i%srcColors.length]}"></div></div><div class="bar-count">${v}</div></div>`).join('');
const st={Submitted:0,Quoted:0,Completed:0,Lost:0};leads.forEach(l=>st[l.status]=(st[l.status]||0)+1);const tot2=Object.values(st).reduce((a,b)=>a+b,0);let off=0,paths='';Object.entries(st).forEach(([k,v])=>{const pct=v/tot2,r=45,c=2*Math.PI*r;paths+=`<circle cx="55" cy="55" r="${r}" fill="none" stroke="${statusColors[k]}" stroke-width="16" stroke-dasharray="${pct*c} ${c}" stroke-dashoffset="${-off*c}" transform="rotate(-90 55 55)"/>`;off+=pct;});document.getElementById('donut-el').innerHTML=paths+`<text x="55" y="60" text-anchor="middle" fill="#eef0f6" font-size="16" font-family="Syne,sans-serif" font-weight="800">${tot2}</text>`;document.getElementById('donut-legend').innerHTML=Object.entries(st).map(([k,v])=>`<div class="legend-row"><div class="legend-swatch" style="background:${statusColors[k]}"></div><div class="legend-key">${k}</div><div class="legend-count">${v}</div></div>`).join('');
document.getElementById('dash-perf').innerHTML=team.map(e=>perfCard(e)).join('');}

function perfCard(emp){const el=leads.filter(l=>l.addedBy===emp),done=el.filter(l=>l.status==='Completed').length,rate=el.length?Math.round(done/el.length*100):0,val=el.reduce((s,l)=>s+(l.value||0),0);const src={};el.forEach(l=>src[l.source]=(src[l.source]||0)+1);const top=Object.entries(src).sort((a,b)=>b[1]-a[1])[0];return`<div class="perf-box"><div class="perf-person"><div class="avatar">${emp[0]}</div><div><div class="perf-name">${emp}</div><div class="perf-title">Logistics Executive</div></div></div><div class="perf-nums"><div class="perf-num-box"><div class="perf-big">${el.length}</div><div class="perf-small">Leads</div></div><div class="perf-num-box"><div class="perf-big" style="color:var(--green)">${done}</div><div class="perf-small">Closed</div></div><div class="perf-num-box"><div class="perf-big">${rate}%</div><div class="perf-small">Rate</div></div></div><div class="progress-row"><div class="progress-label-row"><span class="progress-label">Conversion</span><span class="progress-val">${rate}%</span></div><div class="progress-track"><div class="progress-fill" style="width:${rate}%"></div></div></div><div style="font-size:0.72rem;color:var(--muted);margin-top:0.5rem">Pipeline: <span style="color:var(--gold);font-family:'DM Mono',monospace">&#8377;${(val/1000).toFixed(0)}K</span>${top?' &nbsp;&middot;&nbsp; Top: <span style="color:var(--soft)">'+top[0]+'</span>':''}</div></div>`;}

function renderLeads(f,s){if(f!==undefined)currentFilter=f;if(s!==undefined)currentStatus=s;const list=leads.filter(l=>(!currentFilter||[l.client,l.id,l.dest,l.origin].some(x=>x.toLowerCase().includes(currentFilter.toLowerCase())))&&(!currentStatus||l.status===currentStatus));const tbody=document.getElementById('leads-body');if(!list.length){tbody.innerHTML=`<tr><td colspan="10">${emptyState()}</td></tr>`;return;}tbody.innerHTML=list.map(l=>`<tr><td><span style="font-family:'DM Mono',monospace;font-size:0.75rem;color:var(--gold)">${l.id}</span></td><td><div style="font-weight:600">${l.client}</div><div style="font-size:0.7rem;color:var(--muted)">${l.contact||''}</div></td><td style="font-size:0.8rem">${l.origin} &rarr; ${l.dest}</td><td>${badge(l.mode,modeClass[l.mode]||'b-submitted')}</td><td style="font-size:0.78rem;color:var(--soft)">${l.source}</td><td>${badge(l.status,statusClass[l.status])}</td><td style="font-family:'DM Mono',monospace;font-size:0.78rem;color:var(--soft)">${fmtVal(l.value)}</td><td style="font-size:0.8rem">${l.addedBy}</td><td style="font-family:'DM Mono',monospace;font-size:0.72rem;color:var(--muted)">${l.date}</td><td><div style="display:flex;gap:0.3rem"><button class="btn btn-icon" onclick="viewLead('${l.id}')" title="View">&#9654;</button><button class="btn btn-icon" onclick="editLead('${l.id}')" title="Edit">&#9998;</button><button class="btn btn-icon" onclick="addQuote('${l.id}')" title="Add Quote">&#36;</button><button class="btn btn-icon del" onclick="deleteLead('${l.id}')" title="Delete">&times;</button></div></td></tr>`).join('');}

function renderMyLeads(){const list=leads.filter(l=>l.addedBy===currentUser);const tbody=document.getElementById('myleads-body');if(!list.length){tbody.innerHTML=`<tr><td colspan="9">${emptyState('No leads yet. Add your first lead.')}</td></tr>`;return;}tbody.innerHTML=list.map(l=>`<tr><td><span style="font-family:'DM Mono',monospace;font-size:0.75rem;color:var(--gold)">${l.id}</span></td><td><div style="font-weight:600">${l.client}</div></td><td style="font-size:0.8rem">${l.origin} &rarr; ${l.dest}</td><td>${badge(l.mode,modeClass[l.mode]||'b-submitted')}</td><td style="font-size:0.78rem;color:var(--soft)">${l.source}</td><td>${badge(l.status,statusClass[l.status])}</td><td style="font-family:'DM Mono',monospace;font-size:0.78rem;color:var(--soft)">${fmtVal(l.value)}</td><td style="font-family:'DM Mono',monospace;font-size:0.72rem;color:var(--muted)">${l.date}</td><td><div style="display:flex;gap:0.3rem"><button class="btn btn-icon" onclick="viewLead('${l.id}')">&#9654;</button><button class="btn btn-icon" onclick="editLead('${l.id}')">&#9998;</button><button class="btn btn-icon" onclick="addQuote('${l.id}')">&#36;</button></div></td></tr>`).join('');}

function filterTable(val){currentFilter=val;renderLeads();}
function statusFilter(val){currentStatus=val;renderLeads();}

function emptyState(msg='No records found.'){return`<div class="empty-state"><div class="empty-state-icon"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round"><path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"/><rect x="9" y="3" width="6" height="4" rx="1"/></svg></div><div class="empty-state-text">${msg}</div></div>`;}

function clearForm(){['f-client','f-contact','f-origin','f-dest','f-cargo','f-notes'].forEach(id=>document.getElementById(id).value='');['f-container','f-mode','f-source'].forEach(id=>document.getElementById(id).value='');document.getElementById('f-status').value='Submitted';document.getElementById('f-value').value='';}

function openAddLead(){editingId=null;document.getElementById('modal-lead-title').textContent='Add New Lead';clearForm();openM('modal-lead');}

function editLead(id){const l=leads.find(x=>x.id===id);if(!l)return;editingId=id;document.getElementById('modal-lead-title').textContent='Edit Lead';document.getElementById('f-client').value=l.client;document.getElementById('f-contact').value=l.contact||'';document.getElementById('f-origin').value=l.origin;document.getElementById('f-dest').value=l.dest;document.getElementById('f-cargo').value=l.cargo||'';document.getElementById('f-container').value=l.container||'';document.getElementById('f-mode').value=l.mode;document.getElementById('f-source').value=l.source;document.getElementById('f-status').value=l.status;document.getElementById('f-value').value=l.value||'';document.getElementById('f-notes').value=l.notes||'';openM('modal-lead');}

function saveLead(){const client=document.getElementById('f-client').value.trim(),origin=document.getElementById('f-origin').value.trim(),dest=document.getElementById('f-dest').value.trim(),mode=document.getElementById('f-mode').value,source=document.getElementById('f-source').value;if(!client||!origin||!dest||!mode||!source)return toast('Please fill all required fields.','error');const data={client,contact:document.getElementById('f-contact').value,origin,dest,cargo:document.getElementById('f-cargo').value,container:document.getElementById('f-container').value,mode,source,status:document.getElementById('f-status').value,value:Number(document.getElementById('f-value').value)||0,notes:document.getElementById('f-notes').value};if(editingId){Object.assign(leads.find(l=>l.id===editingId),data);toast('Lead updated.');}else{leads.unshift({id:'WRT-'+String(leads.length+1).padStart(3,'0'),...data,addedBy:currentUser,date:new Date().toISOString().split('T')[0],quotes:[]});toast('Lead added.');}closeM('modal-lead');const active=document.querySelector('.page.active')?.id;if(active==='page-leads')renderLeads();if(active==='page-myleads')renderMyLeads();if(active==='page-dashboard')renderDash();}

function deleteLead(id){if(!confirm('Delete this lead?'))return;leads=leads.filter(l=>l.id!==id);renderLeads();toast('Lead removed.');}

function viewLead(id){const l=leads.find(x=>x.id===id);if(!l)return;document.getElementById('modal-detail-title').textContent=l.id+' — '+l.client;const quotes=l.quotes.length?`<div class="quote-list">${l.quotes.map(q=>`<div class="quote-box"><div class="quote-top"><div class="quote-amount">${q.currency} ${Number(q.amount).toLocaleString('en-IN')}</div>${badge(l.status==='Completed'?'Accepted':'Submitted',l.status==='Completed'?'b-completed':'b-submitted')}</div><div class="quote-meta">Delivery: ${q.delivery||'&#8212;'} &nbsp;&middot;&nbsp; By: ${q.by} &nbsp;&middot;&nbsp; ${q.date}</div>${q.notes?`<div style="font-size:0.75rem;color:var(--muted);margin-top:0.3rem">${q.notes}</div>`:''}</div>`).join('')}</div>`:emptyState('No quotes submitted yet.');document.getElementById('modal-detail-body').innerHTML=`<div class="detail-grid"><div class="detail-box"><div class="detail-field"><div class="detail-key">Client</div><div class="detail-val">${l.client}</div></div><div class="detail-field"><div class="detail-key">Contact</div><div class="detail-val">${l.contact||'&#8212;'}</div></div><div class="detail-field"><div class="detail-key">Cargo</div><div class="detail-val">${l.cargo||'&#8212;'}</div></div><div class="detail-field"><div class="detail-key">Container</div><div class="detail-val">${l.container||'&#8212;'}</div></div></div><div class="detail-box"><div class="detail-field"><div class="detail-key">Route</div><div class="detail-val">${l.origin} &rarr; ${l.dest}</div></div><div class="detail-field"><div class="detail-key">Mode</div><div class="detail-val">${badge(l.mode,modeClass[l.mode])}</div></div><div class="detail-field"><div class="detail-key">Status</div><div class="detail-val">${badge(l.status,statusClass[l.status])}</div></div><div class="detail-field"><div class="detail-key">Est. Value</div><div class="detail-val" style="font-family:'DM Mono',monospace;color:var(--gold)">${fmtVal(l.value)}</div></div></div></div><div class="detail-box" style="margin-bottom:1.25rem"><div class="detail-field"><div class="detail-key">Lead Source</div><div class="detail-val">${l.source}</div></div><div class="detail-field"><div class="detail-key">Added By</div><div class="detail-val">${l.addedBy} &nbsp;&middot;&nbsp; ${l.date}</div></div>${l.notes?`<div class="detail-field"><div class="detail-key">Notes</div><div class="detail-val" style="color:var(--soft)">${l.notes}</div></div>`:''}</div><div style="font-family:'Syne',sans-serif;font-size:0.88rem;font-weight:700;margin-bottom:0.75rem">Quotes (${l.quotes.length})</div>${quotes}`;openM('modal-detail');}

function addQuote(id){quotingId=id;['q-amount','q-delivery','q-notes'].forEach(f=>document.getElementById(f).value='');document.getElementById('q-currency').value='INR';openM('modal-quote');}
function saveQuote(){const amount=document.getElementById('q-amount').value;if(!amount)return toast('Please enter an amount.','error');const l=leads.find(x=>x.id===quotingId);if(!l)return;l.quotes.push({amount:Number(amount),currency:document.getElementById('q-currency').value,delivery:document.getElementById('q-delivery').value,notes:document.getElementById('q-notes').value,by:currentUser,date:new Date().toISOString().split('T')[0]});if(l.status==='Submitted')l.status='Quoted';closeM('modal-quote');toast('Quote submitted.');const active=document.querySelector('.page.active')?.id;if(active==='page-leads')renderLeads();if(active==='page-myleads')renderMyLeads();}

function renderReports(){document.getElementById('report-perf').innerHTML=team.map(emp=>{const el=leads.filter(l=>l.addedBy===emp),done=el.filter(l=>l.status==='Completed').length,lost=el.filter(l=>l.status==='Lost').length,rate=el.length?Math.round(done/el.length*100):0,val=el.reduce((s,l)=>s+(l.value||0),0);const src={};el.forEach(l=>src[l.source]=(src[l.source]||0)+1);const top=Object.entries(src).sort((a,b)=>b[1]-a[1])[0];return`<div class="perf-box"><div class="perf-person"><div class="avatar">${emp[0]}</div><div><div class="perf-name">${emp}</div><div class="perf-title">Logistics Executive</div></div></div><div class="perf-nums"><div class="perf-num-box"><div class="perf-big">${el.length}</div><div class="perf-small">Total</div></div><div class="perf-num-box"><div class="perf-big" style="color:var(--green)">${done}</div><div class="perf-small">Closed</div></div><div class="perf-num-box"><div class="perf-big" style="color:var(--red)">${lost}</div><div class="perf-small">Lost</div></div></div><div class="progress-row"><div class="progress-label-row"><span class="progress-label">Conversion Rate</span><span class="progress-val">${rate}%</span></div><div class="progress-track"><div class="progress-fill" style="width:${rate}%"></div></div></div><div style="font-size:0.72rem;color:var(--muted);margin-top:0.6rem">Pipeline: <span style="color:var(--gold);font-family:'DM Mono',monospace">&#8377;${(val/1000).toFixed(0)}K</span>${top?' &nbsp;&middot;&nbsp; Top source: <span style="color:var(--soft)">'+top[0]+'</span>':''}</div></div>`;}).join('');}

function renderMyAnalytics(){const myL=leads.filter(l=>l.addedBy===currentUser),done=myL.filter(l=>l.status==='Completed').length,rate=myL.length?Math.round(done/myL.length*100):0,val=myL.reduce((s,l)=>s+(l.value||0),0);document.getElementById('my-stats').innerHTML=[{val:myL.length,label:'My Total Leads'},{val:done,label:'Completed'},{val:rate+'%',label:'Conversion Rate'},{val:'&#8377;'+(val/1000).toFixed(0)+'K',label:'My Pipeline Value'}].map(s=>`<div class="stat-box"><div class="stat-value">${s.val}</div><div class="stat-name">${s.label}</div></div>`).join('');const st={Submitted:0,Quoted:0,Completed:0,Lost:0};const mo={Air:0,Sea:0,Road:0,Multimodal:0};myL.forEach(l=>{st[l.status]=(st[l.status]||0)+1;mo[l.mode]=(mo[l.mode]||0)+1;});const maxSt=Math.max(...Object.values(st),1);document.getElementById('my-status-bars').innerHTML=Object.entries(st).map(([k,v])=>`<div class="bar-item"><div class="bar-item-label">${k}</div><div class="bar-track"><div class="bar-fill" style="width:${v/maxSt*100}%;background:${statusColors[k]}"></div></div><div class="bar-count">${v}</div></div>`).join('');const mC={Air:'#9b7cf8',Sea:'#5b9cf6',Road:'#e9b94e',Multimodal:'#3ecf8e'};const maxMo=Math.max(...Object.values(mo),1);document.getElementById('my-mode-bars').innerHTML=Object.entries(mo).map(([k,v])=>`<div class="bar-item"><div class="bar-item-label">${k}</div><div class="bar-track"><div class="bar-fill" style="width:${v/maxMo*100}%;background:${mC[k]}"></div></div><div class="bar-count">${v}</div></div>`).join('');}

function openM(id){document.getElementById(id).classList.add('open');}
function closeM(id){document.getElementById(id).classList.remove('open');}
document.querySelectorAll('.overlay').forEach(o=>o.addEventListener('click',e=>{if(e.target===o)o.classList.remove('open');}));
</script>
</body>
</html>
